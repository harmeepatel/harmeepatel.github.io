function addClasses(e,r){for(var a of r)e.classList.add(a)}function removeClasses(e,r){for(var a of r)e.classList.remove(a)}function addUpscaleSuffix(e){return e.includes("@2x")?e:e.replace(".webp","@2x.webp")}function stripUpscaleSuffix(e){return e.replace("@2x.webp",".webp")}function isImgWide(e){return e.naturalWidth>e.naturalHeight}let modal=document.getElementById("image_modal"),modalImg=modal.querySelector("#modal_image"),mdScreen=768,currImgId=-1;function openImageModal(e){window.innerWidth>=mdScreen&&(modalImg.src=addUpscaleSuffix(e.src),modal.showModal())}function closeImageModal(e){e.parentNode.parentNode.querySelector("#modal_image").src=""}function imageSorter(e,r){e=parseInt(e.id),r=parseInt(r.id);return e<r?-1:r<e?1:0}let imgCollection=document.querySelectorAll("figure>img"),imgArr=Array.from(imgCollection).sort(imageSorter),prevImg=imgArr[0],photos=document.getElementById("image-grid");if(window.innerWidth<mdScreen){let a=photos.querySelectorAll("img");for(let r=0;r<a.length;r++){let e=a[r];e.src.includes("@2x")||(e.src=addUpscaleSuffix(e.src))}}modal.addEventListener("keydown",e=>{switch(imgArr.forEach(e=>{stripUpscaleSuffix(e.src)===stripUpscaleSuffix(modalImg.src)&&(currImgId=parseInt(e.id))}),e.code){case"ArrowLeft":case"KeyH":prevImg=imgArr[currImgId-1];break;case"ArrowRight":case"KeyL":prevImg=imgArr[currImgId+1]}console.assert(0<=currImgId||currImgId<imgArr.length,"edge reached"),null!=prevImg&&(modalImg.src=addUpscaleSuffix(prevImg.src))});let MOVE_THRESHOLD=50,initialX=0,moveX=0,isDeleteButtonOpen=!1,arrowLeft=(modal.addEventListener("touchstart",e=>{initialX=e.touches[0].pageX},{passive:!0}),modal.addEventListener("touchmove",e=>{e=e.touches[0].pageX;moveX=e-initialX},{passive:!0}),modal.addEventListener("touchend",()=>{imgArr.forEach(e=>{e.src===stripUpscaleSuffix(modalImg.src)&&(currImgId=parseInt(e.id))}),Math.abs(moveX)>MOVE_THRESHOLD&&modal.open&&(prevImg=moveX<0?imgArr[currImgId+1]:imgArr[currImgId-1]),console.assert(0<=currImgId||currImgId<imgArr.length,"edge reached"),null!=prevImg&&(modalImg.src=addUpscaleSuffix(prevImg.src))}),photos.addEventListener("scroll",()=>{var r=document.getElementById("nav"),a=["ring-1"];if(8<photos.scrollTop&&r.classList.add(...a),photos.scrollTop<8)for(let e=0;e<a.length;e++)r.classList.remove(...a)}),window.addEventListener("load",()=>{var r=photos.querySelectorAll("figure");for(let e=0;e<r.length;e++){var a=r[e],o=a.querySelector("img");Math.random()<.25&&(isImgWide(o)?a.classList.add("md:row-span-2","md:col-span-3"):a.classList.add("md:row-span-2","md:col-span-2"),o.src=addUpscaleSuffix(o.src))}}),window.addEventListener("resize",()=>{window.innerWidth<mdScreen&&modal.open&&modal.close()}),document.getElementById("arrow-left")),arrowRight=document.getElementById("arrow-right"),arc=arrowRight.classList,alc=arrowLeft.classList;photos.addEventListener("scroll",()=>{var e=0==photos.scrollLeft,r=photos.scrollLeft>=photos.scrollWidth-mdScreen;e?(arc.add("hidden"),alc.remove("hidden"),alc.add("animate-bounce-left")):(r?(arc.remove("hidden"),arc.add("animate-bounce-right"),alc.add("hidden")):(arc.remove("hidden"),arc.remove("animate-bounce-right"),alc.remove("hidden")),alc.remove("animate-bounce-left"))});