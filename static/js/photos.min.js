function addClasses(e,r){for(var t of r)e.classList.add(t)}function removeClasses(e,r){for(var t of r)e.classList.remove(t)}function addUpscaleSuffix(e){return e.includes("@2x")?e:e.replace(".webp","@2x.webp")}function stripUpscaleSuffix(e){return e.replace("@2x.webp",".webp")}function isImgWide(e){return e.naturalWidth>e.naturalHeight}let modal=document.getElementById("image-modal"),modalImg=modal.querySelector("#modal-image"),modalTitle=modal.querySelector("#modal-title"),mdScreen=768;function openImageModal(e){window.innerWidth>=mdScreen&&(modalImg.src=addUpscaleSuffix(e.src),modalTitle.innerHTML=e.dataset.title,modal.showModal())}function closeImageModal(e){e.parentNode.parentNode.querySelector("#modal-image").src=""}function imageSorter(e,r){e=parseInt(e.id),r=parseInt(r.id);return e<r?-1:r<e?1:0}let photos=document.getElementById("image-grid");if(window.innerWidth<mdScreen){let t=photos.querySelectorAll("img");for(let r=0;r<t.length;r++){let e=t[r];e.src.includes("@2x")||(e.src=addUpscaleSuffix(e.src))}}let imgCollection=document.querySelectorAll("figure>img"),imgArr=Array.from(imgCollection).sort(imageSorter),nextImg=imgArr[0],currImgId=-1,MOVE_THRESHOLD=(modal.addEventListener("keydown",e=>{switch(imgArr.forEach(e=>{stripUpscaleSuffix(e.src)===stripUpscaleSuffix(modalImg.src)&&(currImgId=parseInt(e.id))}),e.code){case"ArrowLeft":case"KeyH":nextImg=imgArr[currImgId-1];break;case"ArrowRight":case"KeyL":nextImg=imgArr[currImgId+1]}console.assert(0<=currImgId||currImgId<imgArr.length,"edge reached"),console.log(nextImg.dataset.title),null!=nextImg&&(modalImg.src=addUpscaleSuffix(nextImg.src),modalTitle.innerHTML=nextImg.dataset.title)}),50),initialX=0,moveX=0,isDeleteButtonOpen=!1,arrowLeft=(modal.addEventListener("touchstart",e=>{initialX=e.touches[0].pageX},{passive:!0}),modal.addEventListener("touchmove",e=>{e=e.touches[0].pageX;moveX=e-initialX},{passive:!0}),modal.addEventListener("touchend",()=>{imgArr.forEach(e=>{e.src===stripUpscaleSuffix(modalImg.src)&&(currImgId=parseInt(e.id))}),Math.abs(moveX)>MOVE_THRESHOLD&&modal.open&&(nextImg=moveX<0?imgArr[currImgId+1]:imgArr[currImgId-1]),console.assert(0<=currImgId||currImgId<imgArr.length,"edge reached"),null!=nextImg&&(modalImg.src=addUpscaleSuffix(nextImg.src))}),photos.addEventListener("scroll",()=>{var r=document.getElementById("nav"),t=["ring-1"];if(8<photos.scrollTop&&r.classList.add(...t),photos.scrollTop<8)for(let e=0;e<t.length;e++)r.classList.remove(...t)}),window.addEventListener("load",()=>{var r=photos.querySelectorAll("figure");for(let e=0;e<r.length;e++){var t=r[e],a=t.querySelector("img");Math.random()<.25&&(isImgWide(a)?t.classList.add("md:row-span-2","md:col-span-3"):t.classList.add("md:row-span-2","md:col-span-2"),a.src=addUpscaleSuffix(a.src))}}),window.addEventListener("resize",()=>{window.innerWidth<mdScreen&&modal.open&&modal.close()}),document.getElementById("arrow-left")),arrowRight=document.getElementById("arrow-right"),arc=arrowRight.classList,alc=arrowLeft.classList;photos.addEventListener("scroll",()=>{var e=0==photos.scrollLeft,r=photos.scrollLeft>=photos.scrollWidth-mdScreen;e?(arc.add("hidden"),alc.remove("hidden"),alc.add("animate-bounce-left")):(r?(arc.remove("hidden"),arc.add("animate-bounce-right"),alc.add("hidden")):(arc.remove("hidden"),arc.remove("animate-bounce-right"),alc.remove("hidden")),alc.remove("animate-bounce-left"))});